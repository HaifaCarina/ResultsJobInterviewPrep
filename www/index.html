<!DOCTYPE html>
<html>
  <head>
  <title></title>
  
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
	<meta charset="utf-8">

    <link rel="stylesheet" href="jquery.mobile-1.1.0.min.css" />
    <script src="jquery-1.7.1.min.js"></script>
    <script src="jquery.mobile-1.1.0.min.js"></script>
    <script src="iscroll.js"></script>
    
    <script type="text/javascript" charset="utf-8" src="cordova-1.7.0.js"></script>
    <style>
        .ui-header .ui-title, .ui-footer .ui-title {
            text-overflow: clip;
            white-space: normal;
            
        }
        
        .notebook{ 
            background: url(images/notebook.png) repeat;
            line-height: 25px;
            padding: 2px 10px;
            min-height: 420px; /* TEMPORARY SOLUTION */
            height: 100%;
        }
        .content-question, .content-question2{
            font-weight: bold;
            text-align: center;
            
        }
        
        .content-answer, .content-answer2 {
            font-weight: bold;
            text-align: justify;
            
        }
        
        .icon {
            
        }
        .icon-name {
            font-size:12px;
            height: 30px;
            text-align: center;
        }
       
        
    </style>
        
    <script type="text/javascript">
        

        /**
            Global variables
         **/
        
        var slug_array = [];
        var content_array = [];
        var current_slug;
        var keys_array = {};
        var keys_array2 = {};
        var question_page_flag = 1;
        var count;
        var swipe_flag = 0;
        var subcat_array = [];
        var category_content = {};
        /**
            Database Methods
         **/
        
        function onBodyLoad()
        {	
            $.mobile.showPageLoadingMsg();
            document.addEventListener("deviceready", onDeviceReady, false);
        }
	
        function queryCategoryDB(tx) {
            tx.executeSql('SELECT * FROM CARD_CATEGORY', [], queryCategorySuccess, errorCB);
        }
        
        
        function queryCategorySuccess(tx, results) {
            category_content = results;
            
            var len = results.rows.length;
            console.log("CARD_CATEGORY table: " + len + " rows found.");
            
            var category_items = [];
            
            category_items.push('<table valign="top" align="center" >');
            category_items.push('<tr>');
            

            for (var i=0; i<len; i++){
                console.log("subcat:"+results.rows.item(i).subcat_of);
                
                
                console.log("current slug: " + results.rows.item(i).cat_slug);
                slug_array.push(results.rows.item(i).cat_slug);
                
                console.log("Row = " + i + " cat_id = " + results.rows.item(i).cat_id + " cat_name =  " + results.rows.item(i).cat_name + " cat_slug =  " + results.rows.item(i).cat_slug);
            
                if(results.rows.item(i).subcat_of == 0) {
                    category_items.push('<td><a STYLE="text-decoration:none" href="#'+results.rows.item(i).cat_slug+'" class="categories-link" id="'+results.rows.item(i).cat_slug+'-link"><div class="icon"><img height="90" width="90" src="data:image/png;base64,'+results.rows.item(i).cat_img+'"/></div><div class="icon-name">'+results.rows.item(i).cat_name+'</div></a></td>');
                } else {
                    
                }
            
                var htmlAboutContent = "<p align='justify'>This <strong>RESULTS Interview Prep</strong> was developed by Barbara J. Bruno, CPC, CTS who has placed over 10,000 people in jobs during her career as an employment expert in the Staffing and Recruiting Profession.  The information shared reflects the inside secrets used by recruiters throughout the world, as they help prepare candidates for interviews with their clients.</p>";
                
                if(results.rows.item(i).cat_slug == "about"){
                    $("<div data-role='page' id='"+results.rows.item(i).cat_slug+"'> <div data-role='header' data-theme='b'><a href='#home' data-icon='back' >Back</a><h3>"+results.rows.item(i).cat_name+"</h3></div><div id='iscroll-wrapper2-"+results.rows.item(i).cat_slug+"'><div data-role='content'>"+htmlAboutContent+"</div></div></div>").appendTo('body');
                    //myScroll2 = new iScroll('iscroll-wrapper2-'+results.rows.item(i).cat_slug);
                    
                }else {
                    //href='#home' 
                    $("<div data-role='page' id='"+results.rows.item(i).cat_slug+"'> <div data-role='header' data-theme='b'><a data-icon='back' class='list-to-home' subcat_of='"+results.rows.item(i).subcat_of+"'>Back</a><h3>"+results.rows.item(i).cat_name+"</h3></div><div id='iscroll-wrapper2-"+results.rows.item(i).cat_slug+"'><div data-role='content'><ul data-role='listview' data-theme='d' id='"+results.rows.item(i).cat_slug+"-list' data-filter='true'></ul></div></div></div>").appendTo('body');
                    //myScroll2 = new iScroll('iscroll-wrapper2-'+results.rows.item(i).cat_slug);
                }
                
                if ((i+1)%3 == 0) {
                    category_items.push('</tr>');
                    category_items.push('<tr>');
                }
                
                
            }
            
            
            
            tx.executeSql('SELECT * FROM FLIPCARD', [], 
                          function(tx2, results2){ 
                          var len2 = results2.rows.length;
                          
                          content_array = results2.rows;
                          
                          console.log("results2 size:"+results2.rows.length);
                          console.log("content_array size:"+content_array.length);
                        
                          
                          for(var x=0; x < slug_array.length; x++) {
                              var htmlContent="";
                              var list = [];
                          
                          
                              for (var j=0; j < len2; j++) {
                                  
                                  if(slug_array[x]==results2.rows.item(j).cat_slug) {
                                    list.push(results2.rows.item(j).id);
                                    //keys_array[slug_array[x]]= results2.rows.item(j).id;
                                    
                                    htmlContent +="<li data-icon='false'><a class='question-link' key='"+results2.rows.item(j).id+"'>  "+ unescape(results2.rows.item(j).question)+"</a></li>";
                                  }
                          
                              }
                          //keys_array[slug_array[x]].push(list);
                          keys_array[slug_array[x]] = list;
                          //console.log("checking list-size" + list.length);
                          //console.log("checking keys-array2-size" + keys_array2[slug_array[x]].length);
                            $("#"+slug_array[x]+"-list").html(htmlContent);
                            //$("#"+slug_array[x]+"-list").append("<li data-icon='false'><a class='question-link' > appended item</a></li>");
                            
                          }
                      
                          var len_categories = category_content.rows.length;          
                          for (var i=0; i<len_categories; i++){
                              if(category_content.rows.item(i).subcat_of != 0) { //i=subcat j=regular
                                  for (var j=0; j<len_categories; j++){
                                      if(category_content.rows.item(i).subcat_of == category_content.rows.item(j).cat_id) {
                          
                                          $("#"+category_content.rows.item(j).cat_slug+"-list").append("<li data-icon='false'><a subcat_of='"+category_content.rows.item(j).cat_slug+"' href='#"+category_content.rows.item(i).cat_slug+"' >  "+ category_content.rows.item(i).cat_name+"</a></li>");
                          
                                           
                          
                          
                                      }
                                  }
                              }
                          }
                          
              }, errorCB);
            
            
            category_items.push('</tr>');
            
            
            $('<table/>', {
              'class': 'my-new-list',
              html: category_items.join('')
              }).appendTo('#categories-content');
            
            $.mobile.hidePageLoadingMsg()
        }
        
        
        function errorCB(err) {
            console.log("Error processing SQL: "+err.code);
            console.log(err);
        }
        
        
        function successCB() {
            var db = window.openDatabase("Flashcard", "1.0", "Flashcard Database", 800000);
            //db.transaction(queryCategoryDB, errorCB);
            console.log("successfull cb");
            
        }
        /**
            Connection Methods
         **/
        function hasConnection() {
            var networkState = navigator.network.connection.type;
            
            var states = {};
            states[Connection.UNKNOWN]  = false;//'Unknown connection';
            states[Connection.ETHERNET] = true; //'Ethernet connection';
            states[Connection.WIFI]     = true; //'WiFi connection';
            states[Connection.CELL_2G]  = true; //'Cell 2G connection';
            states[Connection.CELL_3G]  = true; //'Cell 3G connection';
            states[Connection.CELL_4G]  = true; //'Cell 4G connection';
            states[Connection.NONE]     = false; //'No network connection';
            
            return states[networkState];
        }
        
        function hescape(str){
            str.replace("'", "\'");
            str.replace('"', "\'\'");
            return str;
        }
        
        function createTables() {
            console.log("createTables success");
            var db = window.openDatabase("Flashcard", "1.0", "Flashcard Database", 800000);
            db.transaction(function(tx){
                           tx.executeSql('DROP TABLE IF EXISTS CARD_CATEGORY');
                           tx.executeSql('CREATE TABLE IF NOT EXISTS CARD_CATEGORY (cat_id unique, subcat_of, cat_name, cat_img, cat_slug)');
                           
                           tx.executeSql('DROP TABLE IF EXISTS FLIPCARD');
                           tx.executeSql('CREATE TABLE IF NOT EXISTS FLIPCARD (id unique, cat_id, cat_slug, question, answer)');
                           console.log("drop create success");
                           });
            
            
            $.ajax({
                   //beforeSend: function() { $.mobile.showPageLoadingMsg(); }, //Show spinner
                   //complete: function() { $.mobile.hidePageLoadingMsg() },  //Hide spinner
                   url: 'http://nmgdev.com/flashcard/categories.php',
                   dataType: 'json',
                   success: function(data) {
                       console.log('getJSON categories');
                       $.each(data.categories, function(key, val) {
                              
                              db.transaction(function(tx){
                                             
                                             tx.executeSql('INSERT INTO CARD_CATEGORY (cat_id, subcat_of,cat_name, cat_img, cat_slug) VALUES ('+val.cat_id+',' +val.subcat_of+', "'+val.cat_name+'", "'+val.base64+'","'+val.cat_slug+'")');
                                             });
                              });
                       console.log("insert category success");
                       db.transaction(queryCategoryDB, errorCB, successCB); //this is just to check values of the database 
                   
                   }
                   });
            $.ajax({
                   //beforeSend: function() { $.mobile.showPageLoadingMsg(); }, //Show spinner
                   //complete: function() { $.mobile.hidePageLoadingMsg() },  //Hide spinner
                   url: 'http://nmgdev.com/flashcard/content.php',
                   dataType: 'json',
                   success: function(data) {
                       console.log('getJSON content');
                       console.log("content must be present");
                       
                       $.each(data.content, function(key, val) {
                              
                              db.transaction(function(tx){
                                             tx.executeSql("INSERT INTO FLIPCARD VALUES ("+val.id+", "+val.cat_id+", '"+val.cat_slug+"',\""+escape(val.question)+"\",\""+escape(val.answer)+"\")");
                                            
                                             });
                              
                              });
                       console.log("insert content success");
                   }
                   });

        }
        var myScroll, myScroll2;
        function onDeviceReady() {
            
            myScroll = new iScroll('iscroll-wrapper');
            /*myScroll = new iScroll('iscroll-wrapper-question');
            myScroll = new iScroll('iscroll-wrapper-question2');
            myScroll = new iScroll('iscroll-wrapper-question3');
            */myScroll = new iScroll('iscroll-wrapper-answer');
            myScroll = new iScroll('iscroll-wrapper-answer2');
            myScroll = new iScroll('iscroll-wrapper-answer3');
            
            var db = window.openDatabase("Flashcard", "1.0", "Flashcard Database", 800000);
            
            if (hasConnection()) {
                console.log("has connection, Create table");
                
                var  categories_md5_local;
                var categories_md5_web;
                var  content_md5_local;
                var content_md5_web;
                
                $.ajax({
                       url: 'http://nmgdev.com/flashcard/categories.php?md5=1',
                       success: function(data) {
                            categories_md5_web = data;
                       },
                       dataType: "text",
                       async: false
                       });
                db.transaction(function(tx){
                               
                               tx.executeSql('SELECT * FROM MD5_TABLE WHERE id=1', [], function(tx3, results3){ 
                                             categories_md5_local = results3.rows.item(0).key;
                                             });
                               });
                
                $.ajax({
                       url: 'http://nmgdev.com/flashcard/content.php?md5=1',
                       success: function(data) {
                            content_md5_web = data;
                       },
                       dataType: "text",
                       async: false
                       });
                db.transaction(function(tx){
                               
                               tx.executeSql('SELECT * FROM MD5_TABLE WHERE id=2', [], function(tx3, results3){ 
                                              content_md5_local = results3.rows.item(0).key;
                                              });
                               });
                
                db.transaction(function(tx){
                               // Check if MD5_TABLE exists
                               tx.executeSql('SELECT name FROM sqlite_master WHERE type="table" AND name="MD5_TABLE"', [], function(tx2, results2){ 
                                             
                                             if (results2.rows.length == 0) { // Table does not exist
                                                    console.log("Table does not exist");
                                                    tx2.executeSql('CREATE TABLE IF NOT EXISTS MD5_TABLE (id unique, key)');
                                                    tx2.executeSql('INSERT INTO MD5_TABLE (id, key) VALUES (2, "'+content_md5_web+'")');
                                                    tx2.executeSql('INSERT INTO MD5_TABLE (id, key) VALUES (1, "'+categories_md5_web+'")');
                                                    createTables();
                                             } else { // Table exists
                                             
                                                console.log(categories_md5_local+"="+categories_md5_web);
                                                console.log(content_md5_local+"="+content_md5_web);
                                                     if((categories_md5_local == categories_md5_web) && (content_md5_local == content_md5_web)) {
                                                            console.log("----display all----");
                                                            
                                                            db.transaction(queryCategoryDB, errorCB, successCB);
                                                     } else {
                                                            console.log("insert into md5table new value");
                                                            tx2.executeSql('UPDATE MD5_TABLE SET key="'+content_md5_web+'" WHERE id=2');
                                                            tx2.executeSql('UPDATE MD5_TABLE SET key="'+categories_md5_web+'" WHERE id=1');
                                                            createTables();
                                                     }
                                             }
                                             
                                             
                                             
                                             });
                                            
                               
                               
                               });
                
            } else {
                console.log("load from local database");
                db.transaction(queryCategoryDB, errorCB, successCB); //this is just to check values of the database 
            }
            
            function nextQuestion() {
                
                if((keys_array[current_slug].indexOf(count)+1) < keys_array[current_slug].length){ 
                    
                    var idx;
                    for(var i=0;i < keys_array[current_slug].length; i++) {
                        if(count == keys_array[current_slug][i]){
                            idx = i;
                        }
                    }
                    
                    var new_count = keys_array[current_slug][idx+1]; 
                    count = new_count;
                    
                    
                    var len2 = content_array.length;
                    var new_data;
                    for (var j=0; j < len2; j++) {  
                        if(new_count==content_array.item(j).id) {
                            new_data = content_array.item(j);
                        }
                    }
                    
                    if (idx%2 == 0) {
                        console.log("question2");
                        $.mobile.changePage( "#question2", {
                                            transition: "slide"
                                            });
                        $("div.content-question2").html(unescape(new_data.question) + "<br/><br/>");//Tap for answer
                        $("div.content-answer2").html(unescape(new_data.answer)+ "<br/><br/>");//Tap to return to question
                        $("div#page-count-question2").html((idx+2)+"/"+keys_array[current_slug].length);
                        $("div#page-count-answer2").html((idx+2)+"/"+keys_array[current_slug].length);
                        question_page_flag = 2;
                        
                    } else {
                        console.log("question");
                        $.mobile.changePage( "#question", {
                                            transition: "slide"
                                            });
                        $("div.content-question").html(unescape(new_data.question) + "<br/><br/>");//Tap for answer
                        $("div.content-answer").html(unescape(new_data.answer)+ "<br/><br/>");//Tap to return to question
                        $("div#page-count-question").html((idx+2)+"/"+keys_array[current_slug].length);
                        $("div#page-count-answer").html((idx+2)+"/"+keys_array[current_slug].length);
                        question_page_flag = 1;

                    }
                    //$("div#page-count-question").html((idx+2)+"/"+keys_array[current_slug].length);
                    
                }
				
			}
            
            function previousQuestion() {
                if(count > 0) {
                    var idx;
                    for(var i=0;i < keys_array[current_slug].length; i++) {
                        if(count == keys_array[current_slug][i]){
                            idx = i;
                        }
                    }
                    
                    if (idx >0){
                        var new_count = keys_array[current_slug][idx-1]; 
                        count = new_count;
                        
                        
                        var len2 = content_array.length;
                        var new_data;
                        for (var j=0; j < len2; j++) {  
                            if(new_count==content_array.item(j).id) {
                                new_data = content_array.item(j);
                            }
                        }
                        
                        if (idx%2 == 0) {
                            console.log("question2");
                            $.mobile.changePage( "#question2", {
                                                transition: "slide",
                                                reverse: true
                                                });
                            $("div.content-question2").html(unescape(new_data.question) + "<br/><br/>");//Tap for answer
                            $("div.content-answer2").html(unescape(new_data.answer) + "<br/><br/>");//Tap to return to question
                            $("div#page-count-question2").html((idx)+"/"+keys_array[current_slug].length);
                            $("div#page-count-answer2").html((idx)+"/"+keys_array[current_slug].length);
                            question_page_flag = 2;
                            
                        } else {
                            console.log("question");
                            $.mobile.changePage( "#question", {
                                                transition: "slide",
                                                reverse: true
                                                });
                            $("div.content-question").html(unescape(new_data.question) + "<br/><br/>");//Tap for answer
                            $("div.content-answer").html(unescape(new_data.answer)+ "<br/><br/>");//Tap to return to question
                            $("div#page-count-question").html((idx)+"/"+keys_array[current_slug].length);
                            $("div#page-count-answer").html((idx)+"/"+keys_array[current_slug].length);
                            question_page_flag = 1;
                            
                        }
                        //$("div#page-count-question").html((idx)+"/"+keys_array[current_slug].length);
                        
                    }
                }
            }
            
            function nextAnswer() {
                
                if((keys_array[current_slug].indexOf(count)+1) < keys_array[current_slug].length){ 
                    var idx;
                    for(var i=0;i < keys_array[current_slug].length; i++) {
                        if(count == keys_array[current_slug][i]){
                            idx = i;
                        }
                    }
                    
                    var new_count = keys_array[current_slug][idx+1]; 
                    count = new_count;
                    
                    
                    var len2 = content_array.length;
                    var new_data;
                    for (var j=0; j < len2; j++) {  
                        if(new_count==content_array.item(j).id) {
                            new_data = content_array.item(j);
                        }
                    }
                    
                    if (idx%2 == 0) {
                        $.mobile.changePage( "#answer2", {
                                            transition: "slide"
                                            });
                        $("div.content-question2").html(unescape(new_data.question)+ "<br/><br/>");//Tap for answer
                        $("div.content-answer2").html(unescape(new_data.answer)+ "<br/><br/>");//Tap to return to question
                        $("div#page-count-question2").html((idx+2)+"/"+keys_array[current_slug].length);
                        $("div#page-count-answer2").html((idx+2)+"/"+keys_array[current_slug].length);
                        question_page_flag = 2;
                        
                    } else {
                        $.mobile.changePage( "#answer", {
                                            transition: "slide"
                                            });
                        $("div.content-question").html(unescape(new_data.question)+ "<br/><br/>");//Tap for answer
                        $("div.content-answer").html(unescape(new_data.answer)+ "<br/><br/>");//Tap to return to question
                        $("div#page-count-question").html((idx+2)+"/"+keys_array[current_slug].length);
                        $("div#page-count-answer").html((idx+2)+"/"+keys_array[current_slug].length);
                        question_page_flag = 1;
                        
                    }
                    //$("div#page-count-question").html((idx+2)+"/"+keys_array[current_slug].length);
                    
                }
            }
            
            function previousAnswer() {
                if(count > 0) {
                    var idx;
                    for(var i=0;i < keys_array[current_slug].length; i++) {
                        if(count == keys_array[current_slug][i]){
                            idx = i;
                        }
                    }
                    
                    if (idx >0){
                        var new_count = keys_array[current_slug][idx-1]; 
                        count = new_count;
                        
                        var len2 = content_array.length;
                        var new_data;
                        for (var j=0; j < len2; j++) {  
                            if(new_count==content_array.item(j).id) {
                                new_data = content_array.item(j);
                            }
                        }
                        
                        if (idx%2 == 0) {
                            $.mobile.changePage( "#answer2", {
                                                transition: "slide",
                                                reverse: true
                                                });
                            $("div.content-question2").html(unescape(new_data.question)+ "<br/><br/>");//Tap for answer
                            $("div.content-answer2").html(unescape(new_data.answer)+ "<br/><br/>");//Tap to return to question
                            $("div#page-count-question2").html((idx)+"/"+keys_array[current_slug].length);
                            $("div#page-count-answer2").html((idx)+"/"+keys_array[current_slug].length);
                            question_page_flag = 2;
                            
                        } else {
                            $.mobile.changePage( "#answer", {
                                                transition: "slide",
                                                reverse: true
                                                });
                            $("div.content-question").html(unescape(new_data.question)+ "<br/><br/>");//Tap for answer
                            $("div.content-answer").html(unescape(new_data.answer)+ "<br/><br/>");//Tap to return to question
                            $("div#page-count-question").html((idx)+"/"+keys_array[current_slug].length);
                            $("div#page-count-answer").html((idx)+"/"+keys_array[current_slug].length);
                            question_page_flag = 1;
                            
                        }
                        //$("div#page-count-question").html((idx)+"/"+keys_array[current_slug].length);
                        
                    }
                }
            }
            
            //    ALL QUESTION/ANSWER PAGE TAPS HERE
            
            $("#question").live("tap", function(e){ 
                                e.stopPropagation ();
                                console.log("question tap");
                                $.mobile.changePage( "#answer", { transition: "flip" });
                                });  
            $("#question2").live("tap", function(e){
                                 e.stopPropagation ();
                                 console.log("question2 tap");
                                 $.mobile.changePage( "#answer2", { transition: "flip" });
                                 });  
            $("#answer").live("tap", function(e){
                              e.stopPropagation ();
                              console.log("answer tap");
                              $.mobile.changePage( "#question", { transition: "flip", reverse: true });
                              });  
            $("#answer2").live("tap", function(e){ 
                               e.stopPropagation ();
                               console.log("answer2 tap");
                               $.mobile.changePage( "#question2", { transition: "flip", reverse: true });
                               }); 
            
            $(".header-question").tap(function(e) {
                                      e.stopPropagation ();
                                      });
			$(".header-question2").tap(function(e) {
                                       e.stopPropagation ();
                                       });
            $(".header-answer").tap(function(e) {
                                    e.stopPropagation ();
                                    });
			$(".header-answer2").tap(function(e) {
                                     e.stopPropagation ();
                                     });
            
            //    ALL QUESTION/ANSWER PAGE SWIPES RIGHT HERE
            
            $("#question").swiperight(function(e) {
                                      e.stopPropagation ();
                                      console.log("question right");
                                      swipe_flag = 1;
                                      previousQuestion();
                                      });
			$("#question2").swiperight(function(e) {
                                       e.stopPropagation ();
                                       console.log("question2 right");
                                       swipe_flag = 1;
                                       previousQuestion();
                                       });
			$("#answer").swiperight(function(e) { 
                                    e.stopPropagation ();
                                    console.log("answer right");
                                    swipe_flag = 1;
                                    previousAnswer();
                                    });
			$("#answer2").swiperight(function(e) {
                                     e.stopPropagation ();
                                     console.log("answer2 right");
                                     swipe_flag = 1;
                                     previousAnswer();
                                     });
			
			//    ALL QUESTION/ANSWER PAGE SWIPES LEFT HERE
			
            $("#question").swipeleft(function(e) {
                                     e.stopPropagation ();
                                     console.log("question left");
                                     swipe_flag = 1;
                                     nextQuestion();
                                     });
			$("#question2").swipeleft(function(e) {
                                      e.stopPropagation ();
                                      console.log("question2 left");
                                      swipe_flag = 1;
                                      nextQuestion();
                                      });
            $("#answer").swipeleft(function(e) { 
                                   e.stopPropagation ();
                                   console.log("answer left");
                                   swipe_flag = 1;
                                   nextAnswer();
                                   });
			$("#answer2").swipeleft(function(e) { 
                                    e.stopPropagation ();
                                    console.log("answer2 left");
                                    swipe_flag = 1;
                                    nextAnswer();
                                    });
            
            $(".question-link").live("tap", function(){ 
                                     
                                     count = $(this).attr('key');
                                     
                                     var len2 = content_array.length;
                                     var new_data;
                                     for (var j=0; j < len2; j++) {   
                                         if(count==content_array.item(j).id) {
                                     
                                            new_data = content_array.item(j);
                                             current_slug = content_array.item(j).cat_slug;
                                             question_page_flag = 1;
                                         }
                                     
                                     }
                                     var idx;
                                     for(var i=0;i < keys_array[current_slug].length; i++) {
                                         if(count == keys_array[current_slug][i]){
                                            idx = i;
                                         }
                                     }
                                     
                                     
                                     if (idx%2 == 0) {
                                     
                                         $.mobile.changePage( "#question", {
                                                             transition: "slide"
                                                             });
                                         
                                         $("div.content-question").html(unescape(new_data.question)+ "<br/><br/>");//Tap for answer
                                         $("div.content-answer").html(unescape(new_data.answer)+ "<br/><br/>");//Tap to return to question
                                         $("div#page-count-question").html((idx+1)+"/"+keys_array[current_slug].length);
                                         $("div#page-count-answer").html((idx+1)+"/"+keys_array[current_slug].length);
                                         question_page_flag = 1;
                                         
                                     } else {
                                        
                                         $.mobile.changePage( "#question2", {
                                                             transition: "slide"
                                                             });
                                         
                                         $("div.content-question2").html(unescape(new_data.question)+ "<br/><br/>");//Tap for answer
                                         $("div.content-answer2").html(unescape(new_data.answer)+ "<br/><br/>");//Tap to return to question
                                         $("div#page-count-question2").html((idx+1)+"/"+keys_array[current_slug].length);
                                         $("div#page-count-answer2").html((idx+1)+"/"+keys_array[current_slug].length);
                                         question_page_flag = 2;
                                     }
                                     
                                     
                                     
                                 });
            
            $(".question-back-link").click(function(){
                                           console.log("back");
                                           
                                           
                                           $.mobile.changePage( "#" + current_slug, { transition: "slide", reverse: true });
                                           return true;
                                           
                                           });
            $(".list-to-home").live("tap", function(){ 
                                           console.log("list-to-home");
                                    var subcat = $(this).attr('subcat_of');       
                                    console.log($(this).attr('subcat_of'));
                                    
                                    if(subcat==0){
                                        
                                        $.mobile.changePage( "#home", { transition: "slide", reverse: true });
                                    }else {
                                        var len_categories = category_content.rows.length;          
                                        for (var i=0; i<len_categories; i++){
                                            
                                            if(category_content.rows.item(i).cat_id == subcat) {
                                                $.mobile.changePage( "#"+category_content.rows.item(i).cat_slug, { transition: "slide", reverse: true });
                                                console.log("yey!"+category_content.rows.item(i).cat_slug);
                                            }
                                        }
                                    }
                                    
                                    
                                           });
			
			
        }
    
    </script>
  </head>
  <body onload="onBodyLoad()">
	
      <!-- CATEGORIES PAGE -->
      <div data-role="page" id="home">
          <div data-role="header" data-theme="b" align="center" data-fullscreen="true">
           
                  <h1 style="width:100%;">
              RESULTS Job Interview Prep
                </h1>
          </div>
          <div id='iscroll-wrapper'>
          <div data-role="content" id="categories-content">	
              
          </div><!-- /content -->
          </div>
      </div><!-- /page -->
      
      <!-- QUESTION PAGE -->
      <div data-role="page" id="question">
          
          <div data-role="header" class="header-question" data-theme="b">
              <a data-icon="back" class="question-back-link">Back</a>
              <h1>Question</h1>
              <a href="#home" data-icon="home">Home</a>
              <!--
              <div data-type="horizontal" data-role="controlgroup" class="ui-btn-right ui-corner-all ui-controlgroup ui-controlgroup-horizontal" id="page-count-question">1234</div>-->
          </div> 
          <div id='iscroll-wrapper-question'>
              <div data-role="content" class="notebook">	
                  <div id="page-count-question" style="text-align: right;"></div>
                  <div class="content-question"></div><br/>
                    <a style="position: absolute; bottom: 0; margin-left: auto;   margin-right: auto;  width: 93%;" data-role="button" data-theme="b" >Tap for answer</a>
              </div><!-- /content -->
          </div>
      </div><!-- /page -->
      
      <!-- QUESTION2 PAGE -->
      <div data-role="page" id="question2">
          
          <div data-role="header" class="header-question2" data-theme="b">
              <a data-icon="back" class="question-back-link">Back</a>
              <h1>Question</h1>
              <a href="#home" data-icon="home">Home</a>
              <!--
              <div data-type="horizontal" data-role="controlgroup" class="ui-btn-right ui-corner-all ui-controlgroup ui-controlgroup-horizontal" id="page-count-question"></div>-->
          </div> 
          <div id='iscroll-wrapper-question2'>
              <div data-role="content" class="notebook">	
                  <div id="page-count-question2" style="text-align: right;"></div>
                  <div class="content-question2"></div><br/>
                  <a style="position: absolute; bottom: 0; margin-left: auto;   margin-right: auto;  width: 93%;" data-role="button" data-theme="b" >Tap for answer</a>
              </div><!-- /content -->
           </div>
      </div><!-- /page -->
      
      <!-- QUESTION3 PAGE -->
      <div data-role="page" id="question3">
          
          <div data-role="header" class="header-question3" data-theme="b">
              <a data-icon="back" class="question-back-link">Back</a>
              <h1>Question</h1>
              <a href="#home" data-icon="home">Home</a>
              <!--
               <div data-type="horizontal" data-role="controlgroup" class="ui-btn-right ui-corner-all ui-controlgroup ui-controlgroup-horizontal" id="page-count-question"></div>-->
          </div> 
          <div id='iscroll-wrapper-question3'>
              <div data-role="content" class="notebook">	
                  <div id="page-count-question3" style="text-align: right;"></div>
                  <div class="content-question3"></div><br/>
                  <a style="position: absolute; bottom: 0; margin-left: auto;   margin-right: auto;  width: 93%;" data-role="button" data-theme="b" >Tap for answer</a>
              </div><!-- /content -->
          </div>
      </div><!-- /page -->
      
      <!-- ANSWER PAGE -->
      <div data-role="page" id="answer"  >
          <div data-role="header" class="header-answer" data-theme="b">
              <a data-icon="back" class="question-back-link">Back</a>
              <h1>Answer</h1>
              <a href="#home" data-icon="home">Home</a>
              <!--<div data-type="horizontal" data-role="controlgroup" class="ui-btn-right ui-corner-all ui-controlgroup ui-controlgroup-horizontal" id="page-count-question"></div>-->
          </div>
          
              <div data-role="content" class="notebook">	
                  <div id='iscroll-wrapper-answer'>
                  <div id="page-count-answer" style="text-align: right;"></div>
                  <div class="content-answer"></div><br/>
                  <a style="position: absolute; bottom: 0; margin-left: auto;   margin-right: auto;  width: 93%;" data-role="button" data-theme="b" >Tap to return to question</a>
              </div><!-- /content -->
          </div>    
      </div><!-- /page -->
      
      <!-- ANSWER PAGE -->
      <div data-role="page" id="answer2" >
          <div data-role="header" class="header-answer2" data-theme="b">
              <a data-icon="back" class="question-back-link">Back</a>
              <h1>Answer</h1>
              <a href="#home" data-icon="home">Home</a>
              <!--
              <div data-type="horizontal" data-role="controlgroup" class="ui-btn-right ui-corner-all ui-controlgroup ui-controlgroup-horizontal" id="page-count-question">4123</div>
               -->
          </div>
          
              <div data-role="content" class="notebook">	
                  <div id='iscroll-wrapper-answer2'>
                  <div id="page-count-answer2" style="text-align: right;"></div>
                  <div class="content-answer2"></div><br/>
                  <a style="position: absolute; bottom: 0; margin-left: auto;   margin-right: auto;  width: 93%;" data-role="button" data-theme="b" >Tap to return to question</a>
              </div><!-- /content -->
          </div>
      </div><!-- /page -->
      
      <!-- ANSWER PAGE -->
      <div data-role="page" id="answer3" >
          <div data-role="header" class="header-answer3" data-theme="b">
              <a data-icon="back" class="question-back-link">Back</a>
              <h1>Answer</h1>
              <a href="#home" data-icon="home">Home</a>
              <!--
               <div data-type="horizontal" data-role="controlgroup" class="ui-btn-right ui-corner-all ui-controlgroup ui-controlgroup-horizontal" id="page-count-question">4123</div>
               -->
          </div>
            <div id='iscroll-wrapper-answer3'>
              <div data-role="content" class="notebook">
                  
                  <div id="page-count-answer3" style="text-align: right;"></div>
                  <div class="content-answer3"></div><br/>
                  <a style="position: absolute; bottom: 0; margin-left: auto;   margin-right: auto;  width: 93%;" data-role="button" data-theme="b" >Tap to return to question</a>
              </div><!-- /content -->
          </div>
      </div><!-- /page -->
  </body>
</html>
